<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Login Test</title>
  <style>
    body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial}
    .btn{padding:8px 12px;border:1px solid #ddd;border-radius:10px;cursor:pointer}
  </style>
</head>
<body>
  <h1>Google 로그인 테스트</h1>
  <p id="state">로그인 상태: 미로그인</p>
  <button id="signin" class="btn">Google 로그인</button>
  <button id="signout" class="btn" style="display:none">로그아웃</button>

  <script type="module">
    import { auth, provider, signInWithPopup, signOut, onAuthStateChanged } from './firebase-init.js';
    const $ = s => document.querySelector(s);
    const $state = $('#state'), $in = $('#signin'), $out = $('#signout');

    $in.addEventListener('click', async () => {
      try { await signInWithPopup(auth, provider); }
      catch(e){ alert('로그인 실패: ' + e.message); }
    });
    $out.addEventListener('click', async () => {
      try { await signOut(auth); }
      catch(e){ alert('로그아웃 실패: ' + e.message); }
    });

    onAuthStateChanged(auth, (user) => {
      if(user){
        $state.textContent = `로그인 상태: ${user.displayName || user.email}`;
        $in.style.display = 'none';
        $out.style.display = 'inline-block';
      }else{
        $state.textContent = '로그인 상태: 미로그인';
        $in.style.display = 'inline-block';
        $out.style.display = 'none';
      }
    });
  </script>
</body>
</html>
