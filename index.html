<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>NPML — Natural Products Metabolomics Lab</title>

  <!-- 폰트: preconnect로 초기 로딩 빨라짐 -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@700&family=Noto+Sans+KR:wght@400;600&display=swap" rel="stylesheet">

  <style>
    :root{--brand:#004A9F;--border:#e5e7eb;--muted:#475569;--gap:18px}
    *{box-sizing:border-box;margin:0;padding:0}
    body{font-family:"Noto Sans KR",system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;color:#0f172a}
    h2{font-family:Montserrat,sans-serif;font-size:28px;margin-bottom:12px}

    /* Header */
    header{position:sticky;top:0;z-index:50;background:#fff;border-bottom:1px solid var(--border)}
    .header-inner{max-width:1200px;margin:0 auto;padding:0 4%;display:flex;justify-content:space-between;align-items:center;height:60px}
    .brand{font-family:Montserrat,sans-serif;font-weight:700;font-size:20px}
    nav a{margin-left:20px;text-decoration:none;color:#0f172a;font-weight:600}
    nav a:hover{color:var(--brand)}

    /* Hero */
    .hero{text-align:center;padding:30px 4%}
    .hero h1{font-family:Montserrat,sans-serif;font-size:32px;margin-bottom:8px}
    .hero p{color:var(--muted)}

    /* Layout */
    .wrap{max-width:1200px;margin:24px auto;padding:0 4%}
    .grid{display:grid;grid-template-columns:1fr 1fr;gap:24px}
    @media(max-width:980px){.grid{grid-template-columns:1fr}}

    /* Section */
    .section{border:1px solid var(--border);border-radius:14px;padding:12px}
    .head{display:flex;align-items:center;justify-content:space-between;margin-bottom:8px}
    .controls{display:flex;gap:8px}
    .btn{width:36px;height:36px;border:1px solid var(--border);background:#fff;border-radius:10px;display:inline-grid;place-items:center;cursor:pointer}
    .btn:active{transform:scale(.98)}
    .btn svg{width:18px;height:18px}

    /* Carousel */
    .clip{overflow:hidden;border-radius:10px}
    .track{display:flex;gap:var(--gap);will-change:transform;transition:transform .4s ease}
    .card{flex:0 0 calc((100% - var(--gap)*2)/3);border:1px solid var(--border);border-radius:12px;overflow:hidden;background:#fff;display:flex;flex-direction:column}
    @media(max-width:1200px){.card{flex-basis:calc((100% - var(--gap))/2)}}
    @media(max-width:640px){.card{flex-basis:100%}}
    .thumb{aspect-ratio:16/9;display:flex;align-items:center;justify-content:center;background:#fafafa}
    .thumb img{max-width:82%;max-height:82%}
    .body{padding:12px 14px}
    .title{font-weight:700;margin-bottom:6px}
    .meta{color:var(--muted);font-size:13px}
  </style>
</head>
<body>

  <!-- 상단 헤더 -->
  <header>
    <div class="header-inner">
      <div class="brand">NPML</div>
      <nav>
        <a href="#home">홈</a>
        <a href="#research-sec">Research</a>
        <a href="#pubs-sec">Publications</a>
      </nav>
    </div>
  </header>

  <!-- 소개 영역 -->
  <section class="hero" id="home">
    <h1>Natural Products Metabolomics Lab</h1>
    <p>천연물 기반 대사체 분석을 통해 활성성분과 작용기전을 규명하는 연구실입니다.</p>
  </section>

  <!-- 메인 콘텐츠 -->
  <div class="wrap">
    <div class="grid">
      <!-- Research -->
      <section class="section" data-carousel id="research-sec">
        <div class="head">
          <h2>Research Topics</h2>
          <div class="controls">
            <button class="btn" data-prev aria-label="이전">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="15 18 9 12 15 6"/></svg>
            </button>
            <button class="btn" data-next aria-label="다음">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="9 18 15 12 9 6"/></svg>
            </button>
          </div>
        </div>
        <div class="clip">
          <div class="track">
            <article class="card"><div class="thumb"><img src="https://picsum.photos/seed/a/640/360" alt=""></div><div class="body"><h3 class="title">천연물 약리기전</h3><div class="meta">활성 성분 분리·동정</div></div></article>
            <article class="card"><div class="thumb"><img src="https://picsum.photos/seed/b/640/360" alt=""></div><div class="body"><h3 class="title">대사체 바이오마커</h3><div class="meta">LC–MS/NMR</div></div></article>
            <article class="card"><div class="thumb"><img src="https://picsum.photos/seed/c/640/360" alt=""></div><div class="body"><h3 class="title">에너지 대사·섬유화</h3><div class="meta">미토콘드리아 타깃</div></div></article>
            <article class="card"><div class="thumb"><img src="https://picsum.photos/seed/d/640/360" alt=""></div><div class="body"><h3 class="title">신규 화합물</h3><div class="meta">구조·기전 규명</div></div></article>
          </div>
        </div>
      </section>

      <!-- Publications -->
      <section class="section" data-carousel id="pubs-sec">
        <div class="head">
          <h2>Recent Publications</h2>
          <div class="controls">
            <button class="btn" data-prev aria-label="이전">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="15 18 9 12 15 6"/></svg>
            </button>
            <button class="btn" data-next aria-label="다음">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="9 18 15 12 9 6"/></svg>
            </button>
          </div>
        </div>
        <div class="clip">
          <div class="track">
            <article class="card"><div class="thumb"><img src="https://picsum.photos/seed/e/640/360" alt=""></div><div class="body"><h3 class="title">Paper A</h3><div class="meta">Journal · 2025</div></div></article>
            <article class="card"><div class="thumb"><img src="https://picsum.photos/seed/f/640/360" alt=""></div><div class="body"><h3 class="title">Paper B</h3><div class="meta">Journal · 2024</div></div></article>
            <article class="card"><div class="thumb"><img src="https://picsum.photos/seed/g/640/360" alt=""></div><div class="body"><h3 class="title">Paper C</h3><div class="meta">Journal · 2023</div></div></article>
            <article class="card"><div class="thumb"><img src="https://picsum.photos/seed/h/640/360" alt=""></div><div class="body"><h3 class="title">Paper D</h3><div class="meta">Journal · 2022</div></div></article>
          </div>
        </div>
      </section>
    </div>
  </div>

  <script>
    // iframe-safe carousel (translateX 기반), 자동슬라이드/일시정지, 이미지 로드 후 재계산, reduce-motion 존중
    (function(){
      const carousels=document.querySelectorAll('[data-carousel]');
      carousels.forEach(sec=>{
        const track=sec.querySelector('.track'),
              cards=Array.from(track.children),
              prev=sec.querySelector('[data-prev]'),
              next=sec.querySelector('[data-next]');
        let index=0,visible=3,cardW=0,timer=null;

        function compute(){
          const clip=sec.querySelector('.clip'),
                gap=parseFloat(getComputedStyle(track).getPropertyValue('--gap')||18);
          cardW=cards[0].getBoundingClientRect().width+gap;
          const total=clip.getBoundingClientRect().width+gap;
          visible=Math.max(1,Math.round(total/cardW));
          go(index,false);
        }

        function go(i,animate=true){
          const maxIndex=Math.max(0,cards.length-visible);
          index=Math.min(Math.max(0,i),maxIndex);
          track.style.transitionDuration=animate?'.4s':'0s';
          track.style.transform=`translateX(${-index*cardW}px)`;
        }

        function step(dir){go(index+dir,true);}

        prev.addEventListener('click',()=>step(-1));
        next.addEventListener('click',()=>step(1));
        window.addEventListener('resize',compute);

        function startAuto(){
          if (window.matchMedia('(prefers-reduced-motion: reduce)').matches) return;
          stopAuto();
          timer=setInterval(()=>{
            const maxIndex=Math.max(0,cards.length-visible);
            if(index>=maxIndex){go(0,true);}else{step(1);}
          },4000);
        }
        function stopAuto(){if(timer){clearInterval(timer);timer=null;}}
        sec.addEventListener('mouseenter',stopAuto);
        sec.addEventListener('mouseleave',startAuto);
        sec.addEventListener('focusin',stopAuto);
        sec.addEventListener('focusout',startAuto);

        // 초기화 + 이미지 로딩 이후 레이아웃 재계산
        compute();
        startAuto();
        window.addEventListener('load',compute);
      });
    })();
  </script>

</body>
</html>
